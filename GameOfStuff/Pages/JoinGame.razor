@page "/joinsession"
@inject NavigationManager NavManager
@inject AppState AppState
@inject GameService GameService

<h3>Join a session</h3>
<Alert />
<EditForm Model="GameModel" OnValidSubmit="Search">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <div class="form-row">
        <div class="form-group col-md-6">
            <InputText id="GameID" @bind-Value="GameModel.GameID" class="form-control" placeholder="Session Name" />
        </div>
        <div class="form-group col-md-6">
            <InputText type="password" id="Password" @bind-Value="GameModel.Password" class="form-control" placeholder="Password" />
        </div>
    </div>
    <button type="submit" class="btn btn-primary">Join Game</button>
</EditForm>
@code {

    public Game GameModel { get; set; } = new Game();
    public string SearchQuery { get; set; }

    private async Task Search()
    {
        try
        {
            GameModel = await GameService.GetGameModel(GameModel.GameID);
            NavManager.NavigateTo($"/session/{GameModel.GameID}");
        }
        catch (Exception ex)
        {
            AppState.ExceptionAlert("Error", ex.Message, true);
        }
    }
}
